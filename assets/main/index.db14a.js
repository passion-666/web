window.__require=function e(o,t,i){function n(r,s){if(!t[r]){if(!o[r]){var a=r.split("/");if(a=a[a.length-1],!o[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var h=t[r]={exports:{}};o[r][0].call(h.exports,function(e){return n(o[r][1][e]||e)},h,h.exports,e,o,t,i)}return t[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<i.length;r++)n(i[r]);return n}({catalog:[function(e,o){"use strict";cc._RF.push(o,"ac044xHYv9LRJo1roLuJh2C","catalog"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.find("Canvas/Loading").on(cc.Node.EventType.TOUCH_END,function(){cc.director.loadScene("loading")},this),cc.find("Canvas/Gradients").on(cc.Node.EventType.TOUCH_END,function(){cc.director.loadScene("gradients")},this),cc.find("Canvas/OldPhoto").on(cc.Node.EventType.TOUCH_END,function(){cc.director.loadScene("oldPhoto")},this),cc.find("Canvas/Mosaic").on(cc.Node.EventType.TOUCH_END,function(){cc.director.loadScene("mosaic")},this),cc.find("Canvas/innerGlow").on(cc.Node.EventType.TOUCH_END,function(){cc.director.loadScene("innerGlow")},this),cc.find("Canvas/pointLight").on(cc.Node.EventType.TOUCH_END,function(){cc.director.loadScene("pointLight")},this),cc.backHome=this.backHome},backHome:function(){cc.director.loadScene("catalog")}}),cc._RF.pop()},{}],gradientControl:[function(e,o){"use strict";cc._RF.push(o,"1b39amMgkJMqZ6opHDxgGnS","gradientControl"),cc.Class({extends:cc.Component,properties:{img:cc.Sprite,left_down:cc.Node,left_up:cc.Node,right_down:cc.Node,right_up:cc.Node},changeColor:function(e,o){var t,i,n,c;switch(this.id=parseInt(o),cc.find("Canvas/color").active=!0,this.id){case 1:t=this.left_down.color.r,i=this.left_down.color.g,n=this.left_down.color.b,c=this.left_down.opacity;break;case 2:t=this.left_up.color.r,i=this.left_up.color.g,n=this.left_up.color.b,c=this.left_up.opacity;break;case 4:t=this.right_down.color.r,i=this.right_down.color.g,n=this.right_down.color.b,c=this.right_down.opacity;break;case 3:t=this.right_up.color.r,i=this.right_up.color.g,n=this.right_up.color.b,c=this.right_up.opacity}cc.find("Canvas/color/rSlider").getComponent(cc.Slider).progress=t/255,cc.find("Canvas/color/gSlider").getComponent(cc.Slider).progress=i/255,cc.find("Canvas/color/bSlider").getComponent(cc.Slider).progress=n/255,cc.find("Canvas/color/aSlider").getComponent(cc.Slider).progress=c/255},change:function(){var e=Math.round(255*cc.find("Canvas/color/rSlider").getComponent(cc.Slider).progress),o=Math.round(255*cc.find("Canvas/color/gSlider").getComponent(cc.Slider).progress),t=Math.round(255*cc.find("Canvas/color/bSlider").getComponent(cc.Slider).progress),i=Math.round(255*cc.find("Canvas/color/aSlider").getComponent(cc.Slider).progress),n=this.img.getComponent("gradient").colors;switch(this.id){case 1:this.left_down.color=new cc.Color(e,o,t),this.left_down.opacity=i,n[0]=new cc.Color(e,o,t,i);break;case 2:this.left_up.color=new cc.Color(e,o,t),this.left_up.opacity=i,n[2]=new cc.Color(e,o,t,i);break;case 3:this.right_up.color=new cc.Color(e,o,t),this.right_up.opacity=i,n[3]=new cc.Color(e,o,t,i);break;case 4:this.right_down.color=new cc.Color(e,o,t),this.right_down.opacity=i,n[1]=new cc.Color(e,o,t,i)}this.img.getComponent("gradient").colors=n},changedColor:function(){cc.find("Canvas/color").active=!1},start:function(){cc.find("Canvas/color/rSlider").on("slide",this.change,this),cc.find("Canvas/color/gSlider").on("slide",this.change,this),cc.find("Canvas/color/bSlider").on("slide",this.change,this),cc.find("Canvas/color/aSlider").on("slide",this.change,this),cc.find("Canvas/backHome").on(cc.Node.EventType.TOUCH_END,this.back,this)},back:function(){cc.backHome()}}),cc._RF.pop()},{}],gradient:[function(e,o){"use strict";cc._RF.push(o,"fe0498BF+ZII5I3TcdLiJHR","gradient"),cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,requireComponent:cc.RenderComponent},properties:{_colors:[cc.Color],colors:{type:cc.Color,get:function(){return this._colors},set:function(e){this._colors=e,this._updateColors()}}},onEnable:function(){cc.director.once(cc.Director.EVENT_AFTER_DRAW,this._updateColors,this)},onDisable:function(){cc.director.off(cc.Director.EVENT_AFTER_DRAW,this._updateColors,this),this.node._renderFlag|=cc.RenderFlow.FLAG_COLOR},_updateColors:function(){var e=this.getComponent(cc.RenderComponent);if(e){var o=e._assembler;if(o instanceof cc.Assembler2D){var t=o._renderData.uintVDatas[0];if(t)for(var i=this.node.color,n=o.floatsPerVert,c=0,r=o.colorOffset,s=t.length;r<s;r+=n)t[r]=(this.colors[c++]||i)._val}}}}),cc._RF.pop()},{}],innerGlow:[function(e,o){"use strict";cc._RF.push(o,"6afa04W/R9AYJzcWkEOhYpE","innerGlow"),cc.Class({extends:cc.Component,properties:{innerGlowChildren:cc.Node},onLoad:function(){},start:function(){cc.find("Canvas/r").on("slide",this.onSliderChanged,this),cc.find("Canvas/g").on("slide",this.onSliderChanged,this),cc.find("Canvas/b").on("slide",this.onSliderChanged,this),cc.find("Canvas/a").on("slide",this.onSliderChanged,this),cc.find("Canvas/width").on("slide",this.onSliderChanged,this),cc.find("Canvas/threshold").on("slide",this.onSliderChanged,this),cc.find("Canvas/backHome").on(cc.Node.EventType.TOUCH_END,this.back,this)},back:function(){cc.backHome()},onSliderChanged:function(){this.color_r=Math.round(255*cc.find("Canvas/r").getComponent(cc.Slider).progress),cc.find("Canvas/r/New Label").getComponent(cc.Label).string=this.color_r,this.color_g=Math.round(255*cc.find("Canvas/g").getComponent(cc.Slider).progress),cc.find("Canvas/g/New Label").getComponent(cc.Label).string=this.color_g,this.color_b=Math.round(255*cc.find("Canvas/b").getComponent(cc.Slider).progress),cc.find("Canvas/b/New Label").getComponent(cc.Label).string=this.color_b,this.color_a=Math.round(255*cc.find("Canvas/a").getComponent(cc.Slider).progress),cc.find("Canvas/a/New Label").getComponent(cc.Label).string=this.color_a,this.glow_width=cc.find("Canvas/width").getComponent(cc.Slider).progress,cc.find("Canvas/width/New Label").getComponent(cc.Label).string=this.glow_width.toFixed(2),this.glow_threshold=1*cc.find("Canvas/threshold").getComponent(cc.Slider).progress,cc.find("Canvas/threshold/New Label").getComponent(cc.Label).string=this.glow_threshold.toFixed(3),this.changeMaterial(new cc.Color(this.color_r,this.color_g,this.color_b,this.color_a),this.glow_width,this.glow_threshold)},changeMaterial:function(e,o,t){this.innerGlowChildren.children.forEach(function(i){i.getComponents(cc.RenderComponent).forEach(function(i){var n=i.getMaterial(0);n.setProperty("glowRange",o),n.setProperty("glowColor",e),n.setProperty("glowThreshold",t),i.setMaterial(0,n)})})}}),cc._RF.pop()},{}],loading:[function(e,o){"use strict";cc._RF.push(o,"3ae26z3ySNAdLTHE3hZm8vQ","loading"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.find("Canvas/backHome").on(cc.Node.EventType.TOUCH_END,this.back,this)},back:function(){cc.backHome()}}),cc._RF.pop()},{}],mosaic:[function(e,o){"use strict";cc._RF.push(o,"81aa16i1xFJwKCSOiUrsGm8","mosaic"),cc.Class({extends:cc.Component,properties:{img:cc.Sprite,tip:cc.Label,slider:cc.Slider},start:function(){this.slider.node.on("slide",this.changeMosaicNumber,this),cc.find("Canvas/backHome").on(cc.Node.EventType.TOUCH_END,this.back,this)},back:function(){cc.backHome()},changeMosaicNumber:function(e){this.tip.string="X\u3001Y\u8f74\u65b9\u5411\u4e0a\u9a6c\u8d5b\u514b\u65b9\u5757\u6570\u91cf\uff1a"+Math.floor(99*e.progress+1);var o=this.img.getMaterial(0);o.setProperty("xBlockCount",Math.floor(99*e.progress+1)),o.setProperty("yBlockCount",Math.floor(99*e.progress+1)),this.img.setMaterial(0,o)}}),cc._RF.pop()},{}],oldPhoto:[function(e,o){"use strict";cc._RF.push(o,"39597lHuw1Az6p8sRqQPs0p","oldPhoto"),cc.Class({extends:cc.Component,properties:{img:cc.Sprite,tip:cc.Label,slider:cc.Slider},start:function(){this.slider.node.on("slide",this.changeOldMaterial,this),cc.find("Canvas/backHome").on(cc.Node.EventType.TOUCH_END,this.back,this)},back:function(){cc.backHome()},changeOldMaterial:function(e){this.tip.string="\u7167\u7247\u8001\u5316\u7a0b\u5ea6\uff1a"+(100*e.progress).toFixed(2)+"%";var o=this.img.getMaterial(0);o.setProperty("oldLevel",parseFloat(e.progress)),this.img.setMaterial(0,o)}}),cc._RF.pop()},{}],pointLight:[function(e,o,t){"use strict";cc._RF.push(o,"1e2c7w/OHpMwb2d6PiMenWz","pointLight"),t.__esModule=!0,t.PointLightUBO=void 0,cc.Class({extends:cc.Component,properties:{img:cc.Sprite},start:function(){this._redSlider=cc.find("Canvas/r").getComponent(cc.Slider),this._greenSlider=cc.find("Canvas/g").getComponent(cc.Slider),this._blueSlider=cc.find("Canvas/b").getComponent(cc.Slider),this._alphaSlider=cc.find("Canvas/a").getComponent(cc.Slider),this._radiuSlider=cc.find("Canvas/radiu").getComponent(cc.Slider),this._redSliderLabel=cc.find("Canvas/r/New Label").getComponent(cc.Label),this._greenSliderLabel=cc.find("Canvas/g/New Label").getComponent(cc.Label),this._blueSliderLabel=cc.find("Canvas/b/New Label").getComponent(cc.Label),this._alphaSliderLabel=cc.find("Canvas/a/New Label").getComponent(cc.Label),this._radiuSliderLabel=cc.find("Canvas/radiu/New Label").getComponent(cc.Label),this._cropAlphaToggle=cc.find("Canvas/alpha").getComponent(cc.Toggle),this._enableFogToggle=cc.find("Canvas/fog").getComponent(cc.Toggle),this._pointLightUBO=new i,this.img.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.img.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on("on_property_change",this._onPropertyChange,this),this._redSlider.node.on("slide",this._onPropertyChanged,this),this._greenSlider.node.on("slide",this._onPropertyChanged,this),this._blueSlider.node.on("slide",this._onPropertyChanged,this),this._alphaSlider.node.on("slide",this._onPropertyChanged,this),this._radiuSlider.node.on("slide",this._onPropertyChanged,this),this._cropAlphaToggle.node.on("toggle",this._onPropertyChanged,this),this._enableFogToggle.node.on("toggle",this._onPropertyChanged,this)},_onTouchStart:function(e){this._onTouchMove(e)},_onTouchMove:function(e){var o=e.getLocation(),t=this.img.node.convertToNodeSpaceAR(o);this._pointLightUBO.centerPoint=cc.v2(this.node.anchorX+t.x/this.node.width,1-(this.node.anchorY+t.y/this.node.height)),this._updateMaterial()},_onPropertyChange:function(e){this._pointLightUBO.centerColor=e.centerColor,this._pointLightUBO.radius=e.radius,this._pointLightUBO.cropAlpha=e.cropAlpha,this._pointLightUBO.enableFog=e.enableFog,this._updateMaterial()},_updateMaterial:function(){var e=this.img.getComponent(cc.RenderComponent),o=e.getMaterial(0);o.setProperty("lightColor",this._pointLightUBO.centerColor),o.setProperty("lightPosition",this._pointLightUBO.centerPoint),o.setProperty("radius",this._pointLightUBO.radius),o.setProperty("cropAlpha",this._pointLightUBO.cropAlpha),o.setProperty("enableFog",this._pointLightUBO.enableFog),e.setMaterial(0,o)},_onPropertyChanged:function(){this._redSliderLabel.string=""+Math.round(255*this._redSlider.progress),this._greenSliderLabel.string=""+Math.round(255*this._greenSlider.progress),this._blueSliderLabel.string=""+Math.round(255*this._blueSlider.progress),this._alphaSliderLabel.string=""+Math.round(255*this._alphaSlider.progress),this._radiuSliderLabel.string=""+this._radiuSlider.progress.toFixed(2),this.node.emit("on_property_change",{centerColor:cc.color(Math.round(255*this._redSlider.progress),Math.round(255*this._greenSlider.progress),Math.round(255*this._blueSlider.progress),Math.round(255*this._alphaSlider.progress)),radius:this._radiuSlider.progress,cropAlpha:this._cropAlphaToggle.isChecked,enableFog:this._enableFogToggle.isChecked})}});var i=function(){this.centerColor=cc.Color.YELLOW,this.centerPoint=cc.v2(.5,.5),this.radius=.5,this.cropAlpha=!0,this.enableFog=!1};t.PointLightUBO=i,cc._RF.pop()},{}]},{},["catalog","gradient","gradientControl","innerGlow","loading","mosaic","oldPhoto","pointLight"]);